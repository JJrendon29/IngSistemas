{% extends "base.html" %}

{% block title %}Contacto - Proyecto Ingenier√≠a{% endblock %}

{% block content %}
<!-- Header de Contacto -->
<section class="page-header">
    <div class="container">
        <h1>üìß Contacto</h1>
        <p>Gesti√≥n del sistema de contactos</p>
    </div>
</section>

<!-- Sistema de Contactos con Pesta√±as -->
<section class="contacto-section">
    <div class="container">
        <!-- Pesta√±as de navegaci√≥n -->
        <div class="tabs-container">
            <div class="tabs">
                <button class="tab-btn active" data-tab="insertar">
                    ‚ûï Nuevo Contacto
                </button>
                <button class="tab-btn" data-tab="gestionar">
                    üìã Gestionar Contactos
                </button>
            </div>
        </div>

        <!-- Contenido de las pesta√±as -->
        <div class="tabs-content">
            <!-- Pesta√±a 1: Insertar Contacto -->
            <div id="insertar-tab" class="tab-content active">
                <div class="form-container">
                    <h3 style="text-align: center; margin-bottom: 1.5rem; color: var(--text-primary);">
                        Agregar Nuevo Contacto
                    </h3>
                    <form action="{{ url_for('guardar_contacto') }}" method="POST" class="contacto-form" id="contactoForm">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="nombre">Nombre Completo *</label>
                                <input type="text" id="nombre" name="nombre" required maxlength="100" placeholder="Tu nombre completo">
                            </div>

                            <div class="form-group">
                                <label for="empresa">Empresa/Organizaci√≥n *</label>
                                <input type="text" id="empresa" name="empresa" required maxlength="100" placeholder="Nombre de tu empresa">
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="correo">Correo Electr√≥nico *</label>
                                <input type="email" id="correo" name="correo" required maxlength="100" placeholder="tu@email.com">
                            </div>

                            <div class="form-group">
                                <label for="celular">Tel√©fono/Celular *</label>
                                <input type="tel" id="celular" name="celular" required maxlength="20" placeholder="3001234567">
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="mensaje">Mensaje (Opcional)</label>
                            <textarea id="mensaje" name="mensaje" rows="5" maxlength="1000" placeholder="Cu√©ntanos c√≥mo podemos ayudarte..."></textarea>
                        </div>

                        <button type="submit" class="btn btn-primary btn-lg">
                            Enviar Mensaje
                        </button>
                    </form>
                </div>
            </div>

            <!-- Pesta√±a 2: Gestionar Contactos -->
            <div id="gestionar-tab" class="tab-content">
                <div class="crud-container">
                    <div class="crud-header">
                        <h3>Lista de Contactos</h3>
                        <button id="refreshBtn" class="btn btn-secondary btn-sm">
                            üîÑ Actualizar
                        </button>
                    </div>
                    
                    <div id="contactos-list" class="contactos-table-container">
                        <p style="text-align: center; color: var(--text-secondary); padding: 2rem;">
                            Cargando contactos...
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Modal para Editar Contacto -->
    <div id="editModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>‚úèÔ∏è Editar Contacto</h3>
                <button class="modal-close" onclick="cerrarModal()">&times;</button>
            </div>
            <form id="editForm" class="contacto-form">
                <input type="hidden" id="edit_id">

                <div class="form-row">
                    <div class="form-group">
                        <label for="edit_nombre">Nombre Completo *</label>
                        <input type="text" id="edit_nombre" required maxlength="100">
                    </div>

                    <div class="form-group">
                        <label for="edit_empresa">Empresa/Organizaci√≥n *</label>
                        <input type="text" id="edit_empresa" required maxlength="100">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="edit_correo">Correo Electr√≥nico *</label>
                        <input type="email" id="edit_correo" required maxlength="100">
                    </div>

                    <div class="form-group">
                        <label for="edit_celular">Tel√©fono/Celular *</label>
                        <input type="tel" id="edit_celular" required maxlength="20">
                    </div>
                </div>

                <div class="form-group">
                    <label for="edit_mensaje">Mensaje (Opcional)</label>
                    <textarea id="edit_mensaje" rows="4" maxlength="1000"></textarea>
                </div>

                <div class="form-row" style="justify-content: flex-end; gap: 1rem;">
                    <button type="button" class="btn btn-secondary" onclick="cerrarModal()">
                        Cancelar
                    </button>
                    <button type="submit" class="btn btn-primary">
                        üíæ Guardar Cambios
                    </button>
                </div>
            </form>
        </div>
    </div>
</section>
{% endblock %}